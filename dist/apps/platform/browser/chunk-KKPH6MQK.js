import{$b as y,N as S,Ra as w,Sa as O,T as b,_b as d,fa as m}from"./chunk-24GKCPYZ.js";import{a as n,b as f}from"./chunk-4CLCTAJ7.js";function k(e){let t=y(()=>e());return P(t)?new Proxy(e,{get(o,r){return r in t?(w(o[r])||Object.defineProperty(o,r,{value:d(()=>o()[r]),configurable:!0}),k(o[r])):o[r]}}):e}var E=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function P(e){if(e===null||typeof e!="object"||R(e))return!1;let t=Object.getPrototypeOf(e);if(t===Object.prototype)return!0;for(;t&&t!==Object.prototype;){if(E.includes(t.constructor))return!1;t=Object.getPrototypeOf(t)}return t===Object.prototype}function R(e){return typeof e?.[Symbol.iterator]=="function"}var W=new WeakMap,c=Symbol("STATE_SOURCE");function B(e,...t){e[c].update(o=>t.reduce((r,s)=>n(n({},r),typeof s=="function"?s(r):s),o)),A(e)}function T(e){return e[c]()}function C(e){return W.get(e[c])||[]}function A(e){let t=C(e);for(let o of t){let r=y(()=>T(e));o(r)}}function L(...e){let t=[...e],o=typeof t[0]=="function"?{}:t.shift(),r=t;return(()=>{class i{constructor(){let u=r.reduce((a,M)=>M(a),x()),{stateSignals:l,props:I,methods:v,hooks:D}=u,h=n(n(n({},l),I),v);this[c]=u[c];for(let a in h)this[a]=h[a];let{onInit:j,onDestroy:g}=D;j&&j(),g&&b(m).onDestroy(g)}static \u0275fac=function(l){return new(l||i)};static \u0275prov=S({token:i,factory:i.\u0275fac,providedIn:o.providedIn||null})}return i})()}function x(){return{[c]:O({}),stateSignals:{},props:{},methods:{},hooks:{}}}function z(e){return t=>{let o=e(n(n(n({[c]:t[c]},t.stateSignals),t.props),t.methods));return Object.keys(o),f(n({},t),{props:n(n({},t.props),o)})}}function N(e){return z(e)}function _(e){return t=>{let o=e(n(n(n({[c]:t[c]},t.stateSignals),t.props),t.methods));return Object.keys(o),f(n({},t),{methods:n(n({},t.methods),o)})}}function G(e){return t=>{let o=typeof e=="function"?e():e,r=Object.keys(o);t[c].update(i=>n(n({},i),o));let s=r.reduce((i,p)=>{let u=d(()=>t[c]()[p]);return f(n({},i),{[p]:k(u)})},{});return f(n({},t),{stateSignals:n(n({},t.stateSignals),s)})}}export{B as a,T as b,L as c,N as d,_ as e,G as f};
